## mysql select语句的执行过程




## mysql基本的组件架构

`连接器`，`分析器`，`执行器`都属于server层


### 连接器

> 作用

- 建立与客户端的连接
- 获取权限
- 维持和管理连接

> 长连接

- 连接未主动关闭，导致内存暴涨，mysql在执行过程中使用的临时内存是管理在连接对象里面的，连接关闭的时候才释放，最后被os强行kill
- 长连接oom解决方案
  - 定时断开长连接
  - mysql版本是5.7以上，每次执行一次比较大的操作后，执行mysql_reset_connection初始化连接，释放资源


### 分析器

- 词法分析：验证sql语句是否有语法错误


### 优化器

- sql在执行之前，对执行计划进行优化，以达到最大效率
  - 存在多个索引对时候，采用哪个索引
  - 有表join对时候，决定连接顺序

### 执行期

- 判断执行权限
- 根据表对定义，调用表定义对存储引擎对接口
- 根据sql语句，通过存储引擎获取数据作为结果集返回给客户端


### 存储引擎

todo